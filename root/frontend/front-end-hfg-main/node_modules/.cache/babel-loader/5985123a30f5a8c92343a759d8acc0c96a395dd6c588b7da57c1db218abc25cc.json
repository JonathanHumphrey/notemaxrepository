{"ast":null,"code":"var _jsxFileName = \"D:\\\\LocalUniversityStuff\\\\Spring2023\\\\Human Factors\\\\notemaxrepository\\\\root\\\\frontend\\\\front-end-hfg-main\\\\src\\\\pages\\\\FileUpload.js\",\n  _s = $RefreshSig$();\nimport { formatUTCDate } from \"../features/formatTime\";\nimport { useState } from \"react\";\nimport \"../styles/FileUpload.css\";\nimport { Document, Page, pdfjs } from \"react-pdf\";\nimport { useUploadFileMutation } from \"../features/fileApiSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\nconst FileUpload = props => {\n  _s();\n  const [uploadFile, {\n    isSuccess\n  }] = useUploadFileMutation();\n  const [file, setFile] = useState(null);\n  const userId = localStorage.getItem(\"userId\");\n  const [numPages, setNumPages] = useState(null);\n  const [pageNumber, setPageNumber] = useState(1);\n  function onDocumentLoadSuccess(_ref) {\n    let {\n      numPages\n    } = _ref;\n    setNumPages(numPages);\n  }\n  ;\n  const handleFileChange = event => {\n    setFile(event.target.files[0]);\n  };\n  const handleSubmit = async event => {\n    event.preventDefault();\n    var pdfData;\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    try {\n      reader.onloadend = function () {\n        pdfData = reader.result.split(',')[1];\n        console.log(pdfData);\n        console.log(pdfData);\n        setFile(pdfData);\n        let date = new Date();\n        let category = document.getElementById(\"category\").value;\n        let realDate = formatUTCDate(date);\n        var fileBlob = {\n          author: userId,\n          file: pdfData,\n          date: realDate,\n          likes: 0,\n          dislikes: 0,\n          category: category,\n          comments: []\n        };\n        const payload = uploadFile({\n          fileBlob\n        });\n        console.log(payload);\n      };\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const content = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: props.isOpen ? \"modal-container open\" : \"modal-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          onChange: handleFileChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pdf-viewer\",\n          children: [/*#__PURE__*/_jsxDEV(Document, {\n            file: file ? file : null,\n            onLoadSuccess: onDocumentLoadSuccess,\n            children: /*#__PURE__*/_jsxDEV(Page, {\n              pageNumber: pageNumber\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Page \", pageNumber, \" of \", numPages]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"category\",\n            children: \" Category: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"category\",\n            name: \"category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"sub-btn\",\n          type: \"submit\",\n          children: \"Upload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"close-btn\",\n        onClick: props.onClose,\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 3\n  }, this);\n  return content;\n};\n_s(FileUpload, \"xGA0AqHCtFV3w12vPx9Ek1G1ZbQ=\", false, function () {\n  return [useUploadFileMutation];\n});\n_c = FileUpload;\nexport default FileUpload;\nvar _c;\n$RefreshReg$(_c, \"FileUpload\");","map":{"version":3,"names":["formatUTCDate","useState","Document","Page","pdfjs","useUploadFileMutation","jsxDEV","_jsxDEV","GlobalWorkerOptions","workerSrc","version","FileUpload","props","_s","uploadFile","isSuccess","file","setFile","userId","localStorage","getItem","numPages","setNumPages","pageNumber","setPageNumber","onDocumentLoadSuccess","_ref","handleFileChange","event","target","files","handleSubmit","preventDefault","pdfData","reader","FileReader","readAsDataURL","onloadend","result","split","console","log","date","Date","category","document","getElementById","value","realDate","fileBlob","author","likes","dislikes","comments","payload","error","content","className","isOpen","children","onSubmit","type","onChange","fileName","_jsxFileName","lineNumber","columnNumber","onLoadSuccess","for","id","name","onClick","onClose","_c","$RefreshReg$"],"sources":["D:/LocalUniversityStuff/Spring2023/Human Factors/notemaxrepository/root/frontend/front-end-hfg-main/src/pages/FileUpload.js"],"sourcesContent":["import { formatUTCDate } from \"../features/formatTime\";\r\n\r\nimport { useState } from \"react\";\r\nimport \"../styles/FileUpload.css\";\r\nimport { Document, Page, pdfjs } from \"react-pdf\";\r\nimport { useUploadFileMutation } from \"../features/fileApiSlice\";\r\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\r\n\r\n\r\nconst FileUpload = (props) => {\r\n\tconst [uploadFile, {isSuccess}] = useUploadFileMutation();\r\n\tconst [file, setFile] = useState(null);\r\n\tconst userId = localStorage.getItem(\"userId\");\r\n\tconst [numPages, setNumPages] = useState(null);\r\n\tconst [pageNumber, setPageNumber] = useState(1);\r\n\r\n\tfunction onDocumentLoadSuccess({ numPages }) {\r\n\t\tsetNumPages(numPages);\r\n\t};\r\n\tconst handleFileChange = (event) => {\r\n\t\tsetFile(event.target.files[0]);\r\n\t};\r\n\tconst handleSubmit = async (event) => {\r\n\t\tevent.preventDefault();\r\n\t\t\r\n\t\tvar pdfData\r\n\t\tconst reader = new FileReader();\r\n\t\treader.readAsDataURL(file)\r\n\t\ttry {\r\n\t\t\treader.onloadend = function () {\r\n\t\t\t\tpdfData = reader.result.split(',')[1];\r\n\t\t\t\tconsole.log(pdfData)\r\n\t\t\t\tconsole.log(pdfData)\r\n\t\t\t\tsetFile(pdfData);\r\n\t\t\t\tlet date = new Date();\r\n\t\t\t\tlet category = document.getElementById(\"category\").value;\r\n\t\t\t\tlet realDate = formatUTCDate(date)\r\n\t\t\t\tvar fileBlob = {\r\n\t\t\t\t\tauthor: userId,\r\n\t\t\t\t\tfile: pdfData,\r\n\t\t\t\t\tdate: realDate,\r\n\t\t\t\t\tlikes: 0,\r\n\t\t\t\t\tdislikes: 0,\r\n\t\t\t\t\tcategory: category,\r\n\t\t\t\t\tcomments: []\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst payload = uploadFile({fileBlob});\r\n\t\t\t\tconsole.log(payload)\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\t\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error)\r\n\t\t}\r\n\t};\r\n\r\n\tconst content = (\r\n\t\t<div className={props.isOpen ? \"modal-container open\" : \"modal-container\"}>\r\n\t\t\t<div className=\"content\">\r\n\t\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t\t<input type=\"file\" onChange={handleFileChange}></input>\r\n\t\t\t\t\t<div className=\"pdf-viewer\">\r\n\t\t\t\t\t\t<Document\r\n\t\t\t\t\t\t\tfile={file ? file : null}\r\n\t\t\t\t\t\t\tonLoadSuccess={onDocumentLoadSuccess}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Page pageNumber={pageNumber} />\r\n\t\t\t\t\t\t</Document>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\tPage {pageNumber} of {numPages}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<label for=\"category\"> Category: </label>\r\n\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tid=\"category\"\r\n\t\t\t\t\t\t\tname=\"category\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button className=\"sub-btn\" type=\"submit\">\r\n\t\t\t\t\t\tUpload\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t\t<button className=\"close-btn\" onClick={props.onClose}>\r\n\t\t\t\t\tClose\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\treturn content\r\n}\r\nexport default FileUpload;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}